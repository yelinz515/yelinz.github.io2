{"componentChunkName":"component---src-templates-blog-post-js","path":"/2022-08-17-post/","result":{"data":{"site":{"siteMetadata":{"title":"FE Yerin Blog"}},"markdownRemark":{"id":"d2fdea1f-7164-513e-b815-41b1fda9842a","excerpt":"오늘 과제의 핵심은 server에서 데이터를 가져와 client에서 그 데이터를 보여주는 것이라고 생각한다. server에서 데이터 가져오기 (fetch 사용) 처음 로딩화면을 실행하고, server에서 데이터를 가져오면 로딩화면을 보여주지 않게 작성했다. 만약 이 true…","html":"<p>오늘 과제의 핵심은 server에서 데이터를 가져와 client에서 그 데이터를 보여주는 것이라고 생각한다.</p>\n<h3>server에서 데이터 가져오기 (fetch 사용)</h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span> discussions <span class=\"token punctuation\">,</span> setDiscussions <span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isLoading<span class=\"token punctuation\">,</span> setIsLoading<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setIsLoading</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://localhost:4000/discussions'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setDiscussions</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n      <span class=\"token function\">setIsLoading</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>처음 로딩화면을 실행하고, server에서 데이터를 가져오면 로딩화면을 보여주지 않게 작성했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token punctuation\">{</span>isLoading <span class=\"token operator\">?</span> \n          <span class=\"token operator\">&lt;</span>LoadingIndicator <span class=\"token operator\">/</span><span class=\"token operator\">></span> <span class=\"token operator\">:</span> <span class=\"token operator\">&lt;</span>Discussions discussions<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>discussions<span class=\"token punctuation\">}</span><span class=\"token operator\">/</span><span class=\"token operator\">></span> \n        <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">)</span></code></pre></div>\n<p>만약 <code class=\"language-text\">isLoading</code>이 <strong>true</strong>이면 <code class=\"language-text\">&lt;LoadingIndicator /></code> 컴포넌트를 실행해 로딩 화면을 보여주고, <strong>false</strong>이면  <code class=\"language-text\">&lt;Discussions /></code> 컴포넌트를 실행하여 discussion list를 보여준다.</p>\n<h4>화면</h4>\n<p><strong>true</strong>\n<img src=\"/6ba64fecdf8cee51010a31f3cf9a8f0e/loading_agora.gif\" alt=\"Chinese Salty Egg\"></p>\n<p><strong>Result</strong>\n<img src=\"/55e7dc1b3d292d8882f6b4a83f10e171/discussion.gif\" alt=\"Chinese Salty Egg\"></p>","frontmatter":{"title":"my-agora-states-server","date":"August 17, 2022","description":null}},"previous":{"fields":{"slug":"/2022-08-16-post/"},"frontmatter":{"title":"StatesAirline API Server"}},"next":{"fields":{"slug":"/Nomadcoders_twitter/"},"frontmatter":{"title":"[Nomadcoders] Twitter clone Coding"}}},"pageContext":{"id":"d2fdea1f-7164-513e-b815-41b1fda9842a","previousPostId":"8c7af138-1f01-5665-837c-ed1297534242","nextPostId":"73dea074-65a3-5744-8755-9482c7da491e"}},"staticQueryHashes":["2841359383","3257411868"]}